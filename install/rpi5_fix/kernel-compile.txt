git clone --depth=1 --branch rpi-6.12.y https://github.com/raspberrypi/linux
cd linux
copy .c en .h pio files  drivers/misc/rp1-pio.c, include/linux/pio_rp1.h
sudo modprobe configs
zcat /proc/config.gz > .config
make ARCH=arm64 olddefconfig
make -j4 Image modules dtbs
sudo make modules_install
uname -r  # confirm kernel version
dmesg | grep -i pio  # check if your driver loaded
sudo cat /lib/modules/$(uname -r)/build/Module.symvers | grep rp1_pio_sm_buffer_virt

make kernelrelease
sudo make modules_install
ls /lib/modules/6.12.54-v8-16k+
sudo cp arch/arm64/boot/Image /boot/firmware/kernel_2712.img
sudo cp arch/arm64/boot/dts/broadcom/bcm2712-rpi-5-b.dtb /boot/firmware/
sudo cp arch/arm64/boot/dts/overlays/*.dtbo /boot/firmware/overlays/

// install
sudo cp ./radioberry.rbf /lib/firmware
sudo mkdir /lib/modules/$(uname -r)/kernel/drivers/sdr
build radioberry.ko (remove include of Module.symvers from makefile)
sudo cp radioberry.ko /lib/modules/$(uname -r)/kernel/drivers/sdr
sudo cp radioberry.dtbo /boot/overlays
sudo depmod	
sudo modprobe radioberry
sudo chmod 666 /dev/radioberry
sudo apt-get remove cloud-init

// clean
mrproper
sudo modprobe configs
zcat /proc/config.gz > .config
make ARCH=arm64 olddefconfig
make -j4 Image modules dtbs
sudo make modules_install
sudo depmod -a
