import{z as F,r as x,D as J,c as h,w as U,B as q,C as H,b as P,o as a,a as i,e as n,h as g,M as o,L as p,u as s,U as $,G as b,P as W,k as Q,J as k,a1 as N,aA as Y,ah as T}from"./index-DU9YtjQY.js";import{c as Z}from"./useNestedProp-BxrcwmTZ-BdAY6Y8t.js";import{s as tt}from"./vue-data-ui-DF7u-eZV-CTKmBAIv.js";const et={key:0,class:"vue-ui-rating-title",style:{width:"100%"}},lt=["src","height","width"],at=["xmlns","height","width"],it=["id"],ot=["stop-color"],st=["stop-color"],rt=["points","fill","stroke","stroke-width"],nt=["src","alt","height","width","id"],ut=["xmlns","viewBox","height","id"],vt=["id"],yt=["stop-color"],pt=["stop-color"],dt=["points","fill","stroke"],gt=["xmlns","height"],ft=["onClick","onMouseenter","onKeyup"],ct=["onMouseenter"],mt={__name:"vue-ui-rating",props:{config:{type:Object,default(){return{}}},dataset:{type:Object,default(){return{}}}},emits:["rate"],setup(j,{expose:G,emit:X}){const u=j,{vue_ui_rating:D}=F(),m=x(J()),S=x(!1),y=x(void 0),w=x([]),t=h({get:()=>C(),set:l=>l});function C(){return Z({userConfig:u.config,defaultConfig:D})}U(()=>u.config,l=>{t.value=C(),M()},{deep:!0});const O=h(()=>typeof u.dataset.rating=="object"&&!Array.isArray(u.dataset.rating)?K(u.dataset.rating):u.dataset.rating),I=h(()=>typeof u.dataset.rating=="object"&&!Array.isArray(u.dataset.rating)),v=x(O.value),_=h(()=>t.value.type==="image"),f=h(()=>t.value.readonly);function K(l){let r=0,e=0;for(const d in l){const E=parseInt(d),B=l[d];r+=E*B,e+=B}if(e===0)return 0;const c=r/e;return Math.min(t.value.to,Math.max(t.value.from,c))}P(()=>{M()});function M(){q(u.dataset)&&H({componentName:"VueUiRating",type:"dataset"}),w.value=[];for(let l=t.value.from;l<=t.value.to;l+=1)w.value.push(l)}function z(l,r=!1){return l>y.value||f.value?r?t.value.style.image.inactiveOpacity:t.value.style.star.inactiveColor:r?1:t.value.style.star.useGradient?`url(#star_gradient_under_${m.value})`:t.value.style.star.activeColor}function A(l,r=!1){const e=v.value-l,c=r?1:100;switch(!0){case e<=0:return .001;case e>1:return 1*c;default:return e*c}}function V(l){f.value||(v.value=l,X("rate",l))}function L(){return v.value}function R(l=!0){f.value=l}return G({getData:L,toggleReadonly:R}),(l,r)=>(a(),i("div",{style:o(`background:${t.value.style.backgroundColor};font-family:${t.value.style.fontFamily};width:100%`),class:"vue-ui-rating",onMouseover:r[2]||(r[2]=e=>S.value=!0),onMouseleave:r[3]||(r[3]=e=>{S.value=!1,y.value=void 0})},[t.value.style.title.text?(a(),i("div",et,[n("div",{style:o(`color:${t.value.style.title.color};font-weight:${t.value.style.title.bold?"bold":"normal"};text-align:${t.value.style.title.textAlign};margin-bottom:${t.value.style.title.offsetY}px;font-size:${t.value.style.title.fontSize}px`)},g(t.value.style.title.text),5),t.value.style.title.subtitle.text?(a(),i("div",{key:0,style:o(`color:${t.value.style.title.subtitle.color};font-size:${t.value.style.title.subtitle.fontSize}px;text-align:${t.value.style.title.textAlign};margin-bottom:${t.value.style.title.subtitle.offsetY}px;font-weight:${t.value.style.title.subtitle.bold?"bold":"normal"}`)},g(t.value.style.title.subtitle.text),5)):p("",!0)])):p("",!0),t.value.style.rating.show&&t.value.style.rating.position==="top"?(a(),i("div",{key:1,style:o(`width:100%;text-align:center;margin-bottom:${t.value.style.rating.offsetY}px;font-size:${t.value.style.rating.fontSize}px;font-weight:${t.value.style.rating.bold?"bold":"normal"};margin-left:${t.value.style.rating.offsetX}px`)},g(s($)(t.value.style.rating.formatter,v.value,s(b)({v:v.value,r:t.value.style.rating.roundingValue}),t.value)),5)):p("",!0),n("div",{class:"vue-ui-rating-wrapper",style:o(`height:${t.value.style.itemSize}px;width:100%;display:flex;align-items:center;justify-content:center`)},[t.value.style.rating.show&&t.value.style.rating.position==="left"?(a(),i("div",{key:0,style:o(`width:fit-content;text-align:center;margin-bottom:${t.value.style.rating.offsetY}px;font-size:${t.value.style.rating.fontSize}px;font-weight:${t.value.style.rating.bold?"bold":"normal"};padding-right:${t.value.style.rating.offsetX}px`)},g(s($)(t.value.style.rating.formatter,v.value,s(b)({v:v.value,r:t.value.style.rating.roundingValue}),t.value)),5)):p("",!0),(a(!0),i(W,null,Q(w.value,(e,c)=>(a(),i("div",{class:"vue-ui-rating-unit-container",style:o(`position:relative;height:${t.value.style.itemSize}px;width:${t.value.style.itemSize}px`)},[_.value?(a(),i("img",{key:0,src:t.value.style.image.src,height:t.value.style.itemSize,width:t.value.style.itemSize,class:"vue-ui-rating-unit",style:o(`position:absolute;top:0;left:0;opacity:${isNaN(y.value)?t.value.style.image.inactiveOpacity:z(e,!0)}`)},null,12,lt)):(a(),i("svg",{key:1,xmlns:s(k),viewBox:"0 0 100 100",height:t.value.style.itemSize,width:t.value.style.itemSize,class:"vue-ui-rating-unit"},[n("defs",null,[n("radialGradient",{cx:"50%",cy:"50%",r:"50%",fx:"50%",fy:"50%",id:`star_gradient_under_${m.value}`},[n("stop",{offset:"0%","stop-color":`${s(N)(t.value.style.star.activeColor,.05)}`},null,8,ot),n("stop",{offset:"100%","stop-color":t.value.style.star.activeColor},null,8,st)],8,it)]),n("polygon",{points:s(Y)({plot:{x:50,y:50},radius:30,apexes:t.value.style.star.apexes}),fill:isNaN(y.value)?t.value.style.star.inactiveColor:z(e),stroke:t.value.style.star.borderColor?t.value.style.star.borderColor:y.value?z(e):t.value.style.star.inactiveColor,"stroke-width":t.value.style.star.borderWidth,"stroke-linecap":"round","stroke-linejoin":"round"},null,8,rt)],8,at)),_.value?(a(),i("img",{key:2,src:t.value.style.image.src,alt:`${t.value.style.image.alt} ${e}`,height:t.value.style.itemSize,width:t.value.style.itemSize,id:`active_${m.value}_${e}`,class:"vue-ui-rating-unit",style:o(`position:absolute;top:0;left:0;clip:rect(0px,${A(c,!0)*t.value.style.itemSize}px,${t.value.style.itemSize}px,0px`)},null,12,nt)):(a(),i("svg",{key:3,xmlns:s(k),viewBox:`0 0 ${A(c)} 100`,height:t.value.style.itemSize,class:"vue-ui-rating-unit",id:`active_${m.value}_${e}`,style:{position:"absolute",top:"0",left:"0"}},[n("defs",null,[n("radialGradient",{cx:"50%",cy:"50%",r:"50%",fx:"50%",fy:"50%",id:`star_gradient_over_${m.value}`},[n("stop",{offset:"0%","stop-color":`${s(N)(t.value.style.star.activeColor,.05)}`},null,8,yt),n("stop",{offset:"100%","stop-color":t.value.style.star.activeColor},null,8,pt)],8,vt)]),n("polygon",{points:s(Y)({plot:{x:50,y:50},radius:30,apexes:t.value.style.star.apexes}),fill:t.value.style.star.useGradient?`url(#star_gradient_over_${m.value})`:t.value.style.star.activeColor,stroke:t.value.style.star.activeColor},null,8,dt)],8,ut)),(a(),i("svg",{xmlns:s(k),viewBox:"0 0 100 100",height:t.value.style.itemSize,class:"vue-ui-rating-unit",style:o(`position:absolute;top:0;left:0;${f.value?"":"cursor:pointer"}`)},[f.value?p("",!0):(a(),i("rect",{key:0,class:"vue-ui-rating-mouse-trap",x:0,y:0,width:100,height:100,fill:"transparent",onClick:d=>V(e),onMouseenter:d=>y.value=e,onMouseleave:r[0]||(r[0]=d=>y.value=void 0),tabindex:"0",onKeyup:T(d=>V(e),["enter"])},null,40,ft)),f.value?(a(),i("rect",{key:1,class:"vue-ui-rating-mouse-trap",x:0,y:0,width:100,height:100,fill:"transparent",onMouseenter:d=>y.value=e,onMouseleave:r[1]||(r[1]=d=>y.value=void 0)},null,40,ct)):p("",!0)],12,gt)),t.value.style.tooltip.show&&I.value&&f.value?(a(),i("div",{key:4,class:"vue-ui-rating-tooltip",style:o(`border:1px solid ${t.value.style.tooltip.borderColor};position:absolute;top:${-48+t.value.style.tooltip.offsetY}px;left:50%;transform:translateX(-50%);width:fit-content;text-align:center;background:${t.value.style.tooltip.backgroundColor};display:${y.value===e?"block":"none"};padding:2px 12px;border-radius:${t.value.style.tooltip.borderRadius}px;box-shadow:${t.value.style.tooltip.boxShadow}`)},[n("div",{style:o(`width:100%;display:flex;flex-direction:row;gap:6px;position:relative;text-align:center;color:${t.value.style.tooltip.color}`)},[n("span",{style:o(`font-size:${t.value.style.tooltip.fontSize}px`)},g(e)+":",5),n("span",{style:o(`font-weight:${t.value.style.tooltip.bold?"bold":"normal"};font-size:${t.value.style.tooltip.fontSize}px`)},g(s($)(t.value.style.tooltip.formatter,u.dataset.rating[e],s(b)({v:u.dataset.rating[e],r:t.value.style.tooltip.roundingValue}),t.value)),5),n("div",{style:o(`font-family:Arial !important;position:absolute;top:calc(100% - 4px);left:50%;transform:translateX(-50%);color:${t.value.style.tooltip.borderColor}`)}," â–¼ ",4)],4)],4)):p("",!0)],4))),256)),t.value.style.rating.show&&t.value.style.rating.position==="right"?(a(),i("div",{key:1,style:o(`width:fit-content;text-align:center;margin-bottom:${t.value.style.rating.offsetY}px;font-size:${t.value.style.rating.fontSize}px;font-weight:${t.value.style.rating.bold?"bold":"normal"};padding-left:${t.value.style.rating.offsetX}px`)},g(s($)(t.value.style.rating.formatter,v.value,s(b)({v:v.value,r:t.value.style.rating.roundingValue}),t.value)),5)):p("",!0)],4),t.value.style.rating.show&&t.value.style.rating.position==="bottom"?(a(),i("div",{key:2,style:o(`width:100%;text-align:center;margin-top:${t.value.style.rating.offsetY}px;font-size:${t.value.style.rating.fontSize}px;font-weight:${t.value.style.rating.bold?"bold":"normal"};margin-left:${t.value.style.rating.offsetX}px`)},g(s($)(t.value.style.rating.formatter,v.value,s(b)({v:v.value,r:t.value.style.rating.roundingValue}),t.value)),5)):p("",!0)],36))}},bt=tt(mt,[["__scopeId","data-v-d90e158f"]]);export{bt as default};
